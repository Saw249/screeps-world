var BuildPlan = {};
BuildPlan["versatz"] = -5 // blueprint ist mit +5 versatz angelegt worden
BuildPlan[1] = {
	"rcl": 1,
	"buildings": {
		"road": [
			{"x":1,"y":1},
			{"x":1,"y":2},
			{"x":1,"y":3},
			{"x":1,"y":4},
			{"x":1,"y":7},
			{"x":1,"y":6},
			{"x":1,"y":8},
			{"x":1,"y":9},
			{"x":2,"y":9},
			{"x":3,"y":9},
			{"x":4,"y":9},
			{"x":2,"y":1},
			{"x":3,"y":1},
			{"x":4,"y":1},
			{"x":7,"y":1},
			{"x":8,"y":1},
			{"x":9,"y":1},
			{"x":7,"y":9},
			{"x":8,"y":9},
			{"x":9,"y":9},
			{"x":6,"y":1},
			{"x":9,"y":2},
			{"x":9,"y":3},
			{"x":9,"y":4},
			{"x":9,"y":8},
			{"x":9,"y":7},
			{"x":9,"y":6},
			{"x":8,"y":5},
			{"x":7,"y":5},
			{"x":6,"y":5},
			{"x":4,"y":5},
			{"x":3,"y":5},
			{"x":2,"y":5},
			{"x":5,"y":3},
			{"x":5,"y":4},
			{"x":5,"y":2},
			{"x":5,"y":6},
			{"x":5,"y":7},
			{"x":5,"y":8},
			{"x":5,"y":9},
			{"x":6,"y":9}
		]
	}
}

BuildPlan[2] = {
  "rcl": 2,
  "buildings": {
    "extension": [
      {"x":2,"y":2},
      {"x":4,"y":2},
      {"x":3,"y":3},
      {"x":2,"y":4},
      {"x":4,"y":4}
    ]
  }
}

BuildPlan[3] = {
  "rcl": 3,
  "buildings": {
    "extension": [
      {"x":6,"y":4},
      {"x":8,"y":4},
      {"x":7,"y":3},
      {"x":6,"y":2},
      {"x":8,"y":2}
    ],
    "tower": [
      {"x":3,"y":4}
    ]
  }
}

BuildPlan[4] = {
  "rcl": 4,
  "buildings": {
    "extension": [
      {"x":2,"y":6},
      {"x":4,"y":6},
      {"x":3,"y":7},
      {"x":2,"y":8},
      {"x":4,"y":8},
      {"x":6,"y":6},
      {"x":8,"y":6},
      {"x":7,"y":7},
      {"x":8,"y":8},
      {"x":6,"y":8}
    ]
  }
}

BuildPlan[5] = {
  "rcl": 5,
  "buildings": {
    "tower": [
      {"x":7,"y":6}
    ]
  }
}

BuildPlan[6] = { }

BuildPlan[7] = { }

BuildPlan[8] = { }

var BP = {}
BP["versatz"] = {}
BP["versatz"]["X"] = 30
BP["versatz"]["Y"] = 25

BP[1] = {
  "rcl": 1,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "spawn": [
      {"x":30,"y":25}
    ]
  }
}

BP[2] = {
  "rcl": 2,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "extension": [
      {"x":28,"y":26},
      {"x":28,"y":24},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":29,"y":24}
    ],
    "spawn": [
      {"x":30,"y":25}
    ]
  }
}

BP[3] = {
  "rcl": 3,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "tower": [
      {"x":30,"y":20}
    ],
    "extension": [
      {"x":27,"y":26},
      {"x":28,"y":26},
      {"x":27,"y":24},
      {"x":28,"y":24},
      {"x":26,"y":27},
      {"x":26,"y":23},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":28,"y":23},
      {"x":29,"y":24}
    ],
    "spawn": [
      {"x":30,"y":25}
    ]
  }
}

BP[4] = {
  "rcl": 4,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "tower": [
      {"x":30,"y":20}
    ],
    "extension": [
      {"x":23,"y":26},
      {"x":27,"y":26},
      {"x":28,"y":26},
      {"x":27,"y":24},
      {"x":28,"y":24},
      {"x":24,"y":23},
      {"x":24,"y":27},
      {"x":26,"y":27},
      {"x":26,"y":23},
      {"x":26,"y":28},
      {"x":26,"y":22},
      {"x":23,"y":24},
      {"x":26,"y":29},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":27,"y":28},
      {"x":26,"y":21},
      {"x":27,"y":22},
      {"x":28,"y":23},
      {"x":29,"y":24}
    ],
    "spawn": [
      {"x":30,"y":25}
    ],
    "storage": [
      {"x":25,"y":25}
    ]
  }
}

BP[5] = {
  "rcl": 5,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "tower": [
      {"x":20,"y":30},
      {"x":30,"y":20}
    ],
    "extension": [
      {"x":23,"y":26},
      {"x":22,"y":26},
      {"x":27,"y":26},
      {"x":28,"y":26},
      {"x":27,"y":24},
      {"x":28,"y":24},
      {"x":24,"y":23},
      {"x":24,"y":27},
      {"x":26,"y":27},
      {"x":26,"y":23},
      {"x":24,"y":22},
      {"x":24,"y":28},
      {"x":26,"y":28},
      {"x":26,"y":22},
      {"x":22,"y":24},
      {"x":23,"y":24},
      {"x":22,"y":27},
      {"x":23,"y":28},
      {"x":24,"y":29},
      {"x":26,"y":29},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":27,"y":28},
      {"x":26,"y":21},
      {"x":27,"y":22},
      {"x":28,"y":23},
      {"x":29,"y":24},
      {"x":22,"y":23},
      {"x":23,"y":22},
      {"x":24,"y":21}
    ],
    "spawn": [
      {"x":30,"y":25}
    ],
    "storage": [
      {"x":25,"y":25}
    ],
    "link": [
      {"x":25,"y":20}
    ]
  }
}

BP[6] = {
  "rcl": 6,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "tower": [
      {"x":20,"y":30},
      {"x":30,"y":20}
    ],
    "extension": [
      {"x":23,"y":26},
      {"x":22,"y":26},
      {"x":27,"y":26},
      {"x":28,"y":26},
      {"x":27,"y":24},
      {"x":28,"y":24},
      {"x":24,"y":23},
      {"x":24,"y":27},
      {"x":26,"y":27},
      {"x":26,"y":23},
      {"x":21,"y":23},
      {"x":21,"y":27},
      {"x":29,"y":27},
      {"x":29,"y":23},
      {"x":24,"y":22},
      {"x":24,"y":28},
      {"x":26,"y":28},
      {"x":26,"y":22},
      {"x":23,"y":21},
      {"x":27,"y":21},
      {"x":27,"y":29},
      {"x":23,"y":29},
      {"x":22,"y":24},
      {"x":23,"y":24},
      {"x":21,"y":26},
      {"x":22,"y":27},
      {"x":23,"y":28},
      {"x":24,"y":29},
      {"x":26,"y":29},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":27,"y":28},
      {"x":26,"y":21},
      {"x":27,"y":22},
      {"x":28,"y":23},
      {"x":29,"y":24},
      {"x":22,"y":23},
      {"x":21,"y":24},
      {"x":23,"y":22},
      {"x":24,"y":21}
    ],
    "spawn": [
      {"x":30,"y":25}
    ],
    "storage": [
      {"x":25,"y":25}
    ],
    "link": [
      {"x":25,"y":20}
    ]
  }
}

BP[7] = {
  "rcl": 7,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "tower": [
      {"x":20,"y":30},
      {"x":20,"y":20},
      {"x":30,"y":20}
    ],
    "extension": [
      {"x":23,"y":26},
      {"x":22,"y":26},
      {"x":27,"y":26},
      {"x":28,"y":26},
      {"x":27,"y":24},
      {"x":28,"y":24},
      {"x":24,"y":23},
      {"x":24,"y":27},
      {"x":26,"y":27},
      {"x":26,"y":23},
      {"x":21,"y":23},
      {"x":21,"y":27},
      {"x":29,"y":27},
      {"x":29,"y":23},
      {"x":24,"y":22},
      {"x":24,"y":28},
      {"x":26,"y":28},
      {"x":26,"y":22},
      {"x":29,"y":22},
      {"x":29,"y":28},
      {"x":21,"y":28},
      {"x":21,"y":22},
      {"x":22,"y":21},
      {"x":23,"y":21},
      {"x":27,"y":21},
      {"x":27,"y":29},
      {"x":23,"y":29},
      {"x":22,"y":29},
      {"x":22,"y":24},
      {"x":23,"y":24},
      {"x":28,"y":21},
      {"x":21,"y":26},
      {"x":22,"y":27},
      {"x":23,"y":28},
      {"x":24,"y":29},
      {"x":26,"y":29},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":27,"y":28},
      {"x":26,"y":21},
      {"x":27,"y":22},
      {"x":28,"y":23},
      {"x":29,"y":24},
      {"x":22,"y":23},
      {"x":21,"y":24},
      {"x":23,"y":22},
      {"x":24,"y":21},
      {"x":28,"y":29},
      {"x":21,"y":29},
      {"x":29,"y":21}
    ],
    "spawn": [
      {"x":20,"y":25},
      {"x":30,"y":25}
    ],
    "storage": [
      {"x":25,"y":25}
    ],
    "link": [
      {"x":25,"y":20}
    ]
  }
}

BP[8] = {
  "rcl": 8,
  "buildings": {
    "road": [
      {"x":23,"y":25},
      {"x":22,"y":25},
      {"x":21,"y":25},
      {"x":27,"y":25},
      {"x":28,"y":25},
      {"x":29,"y":25},
      {"x":25,"y":23},
      {"x":25,"y":22},
      {"x":25,"y":21},
      {"x":25,"y":27},
      {"x":25,"y":28},
      {"x":25,"y":29},
      {"x":23,"y":20},
      {"x":22,"y":20},
      {"x":21,"y":20},
      {"x":20,"y":21},
      {"x":20,"y":22},
      {"x":20,"y":23},
      {"x":20,"y":24},
      {"x":20,"y":26},
      {"x":20,"y":27},
      {"x":20,"y":28},
      {"x":20,"y":29},
      {"x":21,"y":30},
      {"x":22,"y":30},
      {"x":23,"y":30},
      {"x":26,"y":30},
      {"x":27,"y":30},
      {"x":28,"y":30},
      {"x":29,"y":30},
      {"x":30,"y":29},
      {"x":30,"y":28},
      {"x":30,"y":27},
      {"x":30,"y":26},
      {"x":30,"y":23},
      {"x":30,"y":22},
      {"x":30,"y":21},
      {"x":29,"y":20},
      {"x":28,"y":20},
      {"x":27,"y":20},
      {"x":26,"y":20},
      {"x":30,"y":24},
      {"x":26,"y":24},
      {"x":27,"y":23},
      {"x":28,"y":22},
      {"x":26,"y":26},
      {"x":27,"y":27},
      {"x":28,"y":28},
      {"x":22,"y":28},
      {"x":23,"y":27},
      {"x":24,"y":26},
      {"x":24,"y":20},
      {"x":19,"y":25},
      {"x":25,"y":19},
      {"x":31,"y":25},
      {"x":24,"y":30},
      {"x":25,"y":31},
      {"x":23,"y":23},
      {"x":22,"y":22},
      {"x":24,"y":24}
    ],
    "tower": [
      {"x":20,"y":30},
      {"x":20,"y":20},
      {"x":30,"y":20},
      {"x":30,"y":30}
    ],
    "extension": [
      {"x":23,"y":26},
      {"x":22,"y":26},
      {"x":27,"y":26},
      {"x":28,"y":26},
      {"x":27,"y":24},
      {"x":28,"y":24},
      {"x":24,"y":23},
      {"x":24,"y":27},
      {"x":26,"y":27},
      {"x":26,"y":23},
      {"x":21,"y":23},
      {"x":21,"y":27},
      {"x":29,"y":27},
      {"x":29,"y":23},
      {"x":24,"y":22},
      {"x":24,"y":28},
      {"x":26,"y":28},
      {"x":26,"y":22},
      {"x":29,"y":22},
      {"x":29,"y":28},
      {"x":21,"y":28},
      {"x":21,"y":22},
      {"x":22,"y":21},
      {"x":23,"y":21},
      {"x":27,"y":21},
      {"x":27,"y":29},
      {"x":23,"y":29},
      {"x":22,"y":29},
      {"x":22,"y":24},
      {"x":23,"y":24},
      {"x":28,"y":21},
      {"x":21,"y":26},
      {"x":22,"y":27},
      {"x":23,"y":28},
      {"x":24,"y":29},
      {"x":26,"y":29},
      {"x":29,"y":26},
      {"x":28,"y":27},
      {"x":27,"y":28},
      {"x":26,"y":21},
      {"x":27,"y":22},
      {"x":28,"y":23},
      {"x":29,"y":24},
      {"x":22,"y":23},
      {"x":21,"y":24},
      {"x":23,"y":22},
      {"x":24,"y":21},
      {"x":28,"y":29},
      {"x":21,"y":29},
      {"x":29,"y":21},
      {"x":21,"y":21},
      {"x":29,"y":29},
      {"x":19,"y":24},
      {"x":19,"y":26},
      {"x":31,"y":24},
      {"x":31,"y":26},
      {"x":26,"y":31},
      {"x":24,"y":31},
      {"x":24,"y":19},
      {"x":26,"y":19}
    ],
    "spawn": [
      {"x":20,"y":25},
      {"x":30,"y":25},
      {"x":25,"y":30}
    ],
    "storage": [
      {"x":25,"y":25}
    ],
    "link": [
      {"x":25,"y":20}
    ]
  }
}




//Platzhalter für Road von und zum spawn
BuildPlan["road"] = {
  "rcl": 0,
  "buildings": {
    "road": [
    ]
  }
}

//Platzhalter für Road zum Controller
BuildPlan["road"] = {
  "rcl": 0,
  "buildings": {
    "road": [
    ]
  }
}

//Platzhalter für Exit 
BuildPlan["exit"] = {
  "rcl": 0,
  "buildings": {
    "rampart": [
    ],
	"constructedWall": [
	]
  }
}



BP_LAB = {}
BP_LAB[6] = {
  "rcl": 6,
  "buildings": {
    "road": [
      {"x":23,"y":27},
      {"x":23,"y":26},
      {"x":24,"y":28},
      {"x":25,"y":29},
      {"x":26,"y":29},
      {"x":27,"y":28},
      {"x":28,"y":27},
      {"x":28,"y":26},
      {"x":27,"y":25},
      {"x":25,"y":24},
      {"x":26,"y":24},
      {"x":24,"y":25},
      {"x":25,"y":26},
      {"x":26,"y":27}
    ],
    "lab": [
      {"x":26,"y":25},
      {"x":27,"y":26},
      {"x":27,"y":27}
    ]
  }
}

BP_LAB[7] = {
  "rcl": 7,
  "buildings": {
    "road": [
      {"x":23,"y":27},
      {"x":23,"y":26},
      {"x":24,"y":28},
      {"x":25,"y":29},
      {"x":26,"y":29},
      {"x":27,"y":28},
      {"x":28,"y":27},
      {"x":28,"y":26},
      {"x":27,"y":25},
      {"x":25,"y":24},
      {"x":26,"y":24},
      {"x":24,"y":25},
      {"x":25,"y":26},
      {"x":26,"y":27}
    ],
    "lab": [
      {"x":26,"y":25},
      {"x":27,"y":26},
      {"x":27,"y":27},
      {"x":26,"y":28},
      {"x":24,"y":26},
      {"x":24,"y":27}
    ]
  }
}

BP_LAB[8] = {
  "rcl": 8,
  "buildings": {
    "road": [
      {"x":23,"y":27},
      {"x":23,"y":26},
      {"x":24,"y":28},
      {"x":25,"y":29},
      {"x":26,"y":29},
      {"x":27,"y":28},
      {"x":28,"y":27},
      {"x":28,"y":26},
      {"x":27,"y":25},
      {"x":25,"y":24},
      {"x":26,"y":24},
      {"x":24,"y":25},
      {"x":25,"y":26},
      {"x":26,"y":27}
    ],
    "lab": [
      {"x":25,"y":25},
      {"x":26,"y":25},
      {"x":27,"y":26},
      {"x":27,"y":27},
      {"x":26,"y":28},
      {"x":25,"y":28},
      {"x":24,"y":26},
      {"x":24,"y":27},
      {"x":25,"y":27},
      {"x":26,"y":26}
    ]
  }
}

global.buildNEW = function(spawn,stage,move) {
	if (spawn.room.name == "W8N3") {
		 for (var str_type in BP[stage]["buildings"]) { // -> structuren von der Stage
			for (var str in BP[stage]["buildings"][str_type]) { // schleife über die einzelnen Strukturen
				//verschieben um die Spawnposition und den Versatz zum Center der Blueprints
				if (move) {  
					var newx = eval(BP[stage]["buildings"][str_type][str].x + spawn.pos.x - BP["versatz"]["X"])
					var newy = eval(BP[stage]["buildings"][str_type][str].y + spawn.pos.y - BP["versatz"]["Y"])
				} else {
					newx = BP[stage]["buildings"][str_type][str].x
					newy = BP[stage]["buildings"][str_type][str].y
				}
				
				//prüfen was dort denn so los ist
				//console.log("newx: " +newx + " " + "newy:" + newy)
				var objects = spawn.room.lookForAt(LOOK_STRUCTURES, newx, newy)
				if (objects.length >= 1) {
					//es gibt objekte an der position
					for (var obj in objects) {	
						//Ja und es ist nicht das was wir bauen wollen -> schlecht
						if (objects[obj]["structureType"] == str_type) {
							//new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.3, stroke: 'green'});
						} else {
							//per hand abreißen oder automatisiert
							new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.4, stroke: 'red'});
						}
					}
				} else { //gibt es bereits eine construction site ?
					var objects = spawn.room.lookForAt(LOOK_CONSTRUCTION_SITES, newx, newy)
					if (objects.length >= 1) {
						//new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.1, stroke: 'green'});
					} else {
						new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.1, stroke: 'white'});
						spawn.room.createConstructionSite(newx, newy, str_type)
					}
				}
			}
		 }	
	}
}







global.build = function(spawn,stage,move) {
	 for (var str_type in BuildPlan[stage]["buildings"]) { // -> structuren von der Stage
		for (var str in BuildPlan[stage]["buildings"][str_type]) { // schleife über die einzelnen Strukturen
			//verschieben um die Spawnposition und den Versatz zum Center der Blueprints
			if (move) {
				var newx = eval(BuildPlan[stage]["buildings"][str_type][str].x + spawn.pos.x + BuildPlan["versatz"])
				var newy = eval(BuildPlan[stage]["buildings"][str_type][str].y + spawn.pos.y + BuildPlan["versatz"])
			} else {
				newx = BuildPlan[stage]["buildings"][str_type][str].x
				newy = BuildPlan[stage]["buildings"][str_type][str].y
			}
			
			//prüfen was dort denn so los ist
			var objects = spawn.room.lookForAt(LOOK_STRUCTURES, newx, newy)
			if (objects.length >= 1) {
				//es gibt objekte an der position
				for (var obj in objects) {	
					//Ja und es ist nicht das was wir bauen wollen -> schlecht
					if (objects[obj]["structureType"] == str_type) {
						//new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.3, stroke: 'green'});
					} else {
						//per hand abreißen oder automatisiert
						new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.3, stroke: 'red'});
					}
				}
			} else { //gibt es bereits eine construction site ?
				var objects = spawn.room.lookForAt(LOOK_CONSTRUCTION_SITES, newx, newy)
				if (objects.length >= 1) {
					//new RoomVisual(spawn.room.name).circle(newx,newy, {fill: 'transparent', radius: 0.1, stroke: 'white'});
				} else {
					//spawn.room.createConstructionSite(newx, newy, str_type)
				}
			}
		}
	 }		
}


var mainBuild = {	
    run: function(spawn) {
		//base Layout bauen
		for (var stage = 1; stage <= spawn.room.controller.level; stage++) {
			//build(spawn,stage,true)
		}


		//wenn wir mehrere spawns haben wäre es doch nice, eine straße von spawn zu spawn zu abhen
		if (spawn.room.controller.level >= 0) {
			if (spawn.room.name = "W8N3") {
				buildNEW(spawn,stage,true)
			}
		}




		//controller > 1 dann bauen wir ne road zum controller sofern ne flagge da ist 
		if (spawn.room.controller.level >= 0) {
				BuildPlan["road"]["buildings"]["constructedWall"] = []
				for (var flag in Game.flags) { //wir suchen nach Flags im Raum die heißen: ROAD_CONTROLLER
					if (Game.flags[flag].name.includes("ROAD_CONTROLLER")) {
						var path = spawn.pos.findPathTo(spawn.room.controller, {ignoreCreeps: true, ignoreRoads: false, ignoreDestructibleStructures: true})
						BuildPlan["road"]["buildings"]["road"] = []
						for (var i = 0; i < path.length -1; i++) {
							BuildPlan["road"]["buildings"]["road"].push({x: path[i].x, y: path[i].y})
							//new RoomVisual(spawn.room.name).circle(path[i].x, path[i].y, {fill: 'transparent', radius: 0.3, stroke: 'yellow'});
						}
					Game.flags[flag].remove()						
					}
				}
			if (BuildPlan["road"]["buildings"]["road"].length >= 0) { 
				//build(spawn,"road",false)
			}
		}	 
		 
		 
		//wir suchen nach flags um walls zu bauen
		if (spawn.room.controller.level >= 0) {
			BuildPlan["exit"]["buildings"]["constructedWall"] = []
			BuildPlan["exit"]["buildings"]["rampart"] = []
			//wir suchen nach Flags im Raum die heißen: RX_ZAHL bzw RY_ZAHL
			for (var flag in Game.flags) {
				if (Game.flags[flag].name.includes("WALL_RX")) {
					var startpos = Game.flags[flag].pos
					//////////////////von start.x nach 50 bis hindernis
					for (var x = startpos.x; x <= 50 -1; x++) {
						if (spawn.room.lookForAt(LOOK_TERRAIN, x, startpos.y) == "plain") {
							BuildPlan["exit"]["buildings"]["constructedWall"].push({x: x, y: startpos.y})						
						} else { // wir brechen ab - da wir ein hindernis haben
							break;
						}
					}
					////////////////von start.x nach 0 bis hindernis
					for (var x2 = startpos.x-1; x2 > 0; x2--) {   // -1 damit sich eine kachel nicht doppelt
						if (spawn.room.lookForAt(LOOK_TERRAIN, x2, startpos.y) == "plain") {
							BuildPlan["exit"]["buildings"]["constructedWall"].push({x: x2, y: startpos.y})					
						} else { // wir brechen ab - da wir ein hindernis haben
							break;
						}
					}
					////////////////
					//wir ersetzen nun die mitte mit ramparts ?
					var middle = Math.round(((x+x2)/2))
					//console.log('X-Flag @ ' + startpos.x + ' x-: ' +x2+ ' x+: ' +x+ ' mitte: ' + middle)
					new RoomVisual(spawn.room.name).line(x2, startpos.y, x, startpos.y, {fill: 'transparent', radius: 0.3});	
					new RoomVisual(spawn.room.name).circle(middle, startpos.y, {fill: 'transparent', radius: 0.5, stroke: 'yellow'});	
					//nu müssten wir noch aus dem array die wand an der stelle löschen und eine rampart erstellen
					for (wall in BuildPlan["exit"]["buildings"]["constructedWall"]) {
						if (BuildPlan["exit"]["buildings"]["constructedWall"][wall].y == startpos.y && BuildPlan["exit"]["buildings"]["constructedWall"][wall].x == middle) {
							delete BuildPlan["exit"]["buildings"]["constructedWall"][wall];
							BuildPlan["exit"]["buildings"]["rampart"].push({x: middle, y: startpos.y})
							//console.log("deletex: "+ middle +" / " + startpos.y)
							Game.flags[flag].remove()
						}
					}
				//////////////////////////////////////////////////////////
				} else if (Game.flags[flag].name.includes("WALL_RY")) {
					var startpos = Game.flags[flag].pos
					
					//////////////////von stary.y nach 50 bis hindernis
					for (var y = startpos.y; y <= 50; y++) {
						if (spawn.room.lookForAt(LOOK_TERRAIN, startpos.x, y) == "plain") {
							BuildPlan["exit"]["buildings"]["constructedWall"].push({x: startpos.x, y: y})							
						} else { // wir brechen ab - da wir ein hindernis haben
							break;
						}
					}				
					//////////////////von start.y nach 0 bis hindernis
					for (var y2 = startpos.y-1; y2 > 0; y2--) {  // -1 damit sich eine kachel nicht doppelt
						if (spawn.room.lookForAt(LOOK_TERRAIN, startpos.x, y2) == "plain") {
							BuildPlan["exit"]["buildings"]["constructedWall"].push({x: startpos.x, y: y2})								
						} else { // wir brechen ab - da wir ein hindernis haben
							break;
						}
					}
					////////////////
					//wir ersetzen nun die mitte mit ramparts ?
					var middle = Math.round(((y+y2)/2))
					new RoomVisual(spawn.room.name).line(startpos.x, y, startpos.x, y2, {fill: 'transparent', radius: 0.3});	
					new RoomVisual(spawn.room.name).circle(startpos.x, middle, {fill: 'transparent', radius: 0.5, stroke: 'yellow'});	
					//nu müssten wir noch aus dem array die wand an der stelle löschen und eine rampart erstellen
					for (wall in BuildPlan["exit"]["buildings"]["constructedWall"]) {
						if (BuildPlan["exit"]["buildings"]["constructedWall"][wall].x == startpos.x && BuildPlan["exit"]["buildings"]["constructedWall"][wall].y == middle) {
							delete BuildPlan["exit"]["buildings"]["constructedWall"][wall];
							BuildPlan["exit"]["buildings"]["rampart"].push({x: startpos.x, y: middle})
							//console.log("deletey: "+ startpos.x +" / " + middle)
							Game.flags[flag].remove()
						}
					}
				}
			}
			//build(spawn,"exit",false) //wir bauen den bauplan exit und verschieben nicht 
		 }
	}
};

module.exports = mainBuild;


